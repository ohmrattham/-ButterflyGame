<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏î‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏°‡∏•‡∏á</title>
    <style>
        @font-face {
            font-family: 'Was ThongyodNP';
            src: url('assets/fonts/WasThongyodNP-Regular.ttf') format('truetype');
        }

        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: black;
            font-family: 'Was ThongyodNP', sans-serif;
        }

        .page {
            background: url('m5bg1.png') center/cover no-repeat;
            width: 100%;
            max-width: 600px;
            margin: auto;
            aspect-ratio: 1080 / 1920;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow: hidden;
            position: relative;
            padding: 40px 20px;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 20px;
            color: white;
        }

        p {
            font-size: 20px;
            color: white;
            margin-bottom: 30px;
        }

        button {
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 25px;
            color: white;
            margin-top: 30px;
            transition: background-color 0.3s, transform 0.3s;
        }

        button:hover {
            background-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .question-container {
            display: none;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 15px;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-top: 20px;
        }

        .answer-images {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .answer-images div {
            padding: 10px 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .answer-images div:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.7);
        }

        #popup {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 18px;
            border-radius: 10px;
            z-index: 100;
        }

        canvas#fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
        }

        .firefly {
            position: absolute;
            background-color: yellow;
            border-radius: 50%;
            width: 10px;
            height: 10px;
            opacity: 0;
            animation: fireflyAnimation 2s infinite ease-in-out;
        }

        .selected-answer {
            background-color: rgba(255, 255, 0, 0.3);
            border: 2px solid yellow;
        }


        @keyframes fireflyAnimation {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            50% {
                transform: translate(0, 0) scale(1.2);
                opacity: 0.6;
            }

            100% {
                transform: translate(100px, 100px) scale(0.5);
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <div class="page">
        <audio id="successSound" src="success.mp3" preload="auto"></audio>
        <audio id="failSound" src="fail.mp3" preload="auto"></audio>
        <audio id="correctSound" src="correct.mp3" preload="auto"></audio>
        <audio id="wrongSound" src="wrong.mp3" preload="auto"></audio>
        <audio id="backgroundMusic" src="bgmusic.mp3" preload="auto" loop></audio>

        <canvas id="fireworks"></canvas>

        <h1>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏î</h1>
        <p>‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏á‡∏´‡∏¥‡πâ‡∏á‡∏´‡πâ‡∏≠‡∏¢‡∏à‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì!</p>
        <button onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>

        <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 1 -->
        <div class="question-container" id="question-container">
            <h2>‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∑‡∏î ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏™‡∏á‡∏ß‡∏π‡∏ö‡∏ß‡∏≤‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ‡πÅ‡∏™‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏î‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á?</h2>
            <div class="answer-images">
                <div onclick="selectAnswer(1, 'question1', event)">‡∏à‡∏¥‡πâ‡∏á‡∏´‡∏£‡∏µ‡∏î</div>
                <div onclick="selectAnswer(2, 'question1', event)">‡∏´‡∏¥‡πà‡∏á‡∏´‡πâ‡∏≠‡∏¢</div>
                <div onclick="selectAnswer(3, 'question1', event)">‡∏à‡∏±‡πä‡∏Å‡∏à‡∏±‡πà‡∏ô</div>
            </div>
        </div>

        <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 2 -->
        <div class="question-container" id="question-container-next">
            <h2>‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏±‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡∏Å‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏≤‡∏ô ‡∏£‡∏≤‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î?</h2>
            <div class="answer-images">
                <div onclick="selectAnswer(1, 'question2', event)">‡∏à‡∏¥‡πâ‡∏á‡∏´‡∏£‡∏µ‡∏î</div>
                <div onclick="selectAnswer(2, 'question2', event)">‡∏´‡∏¥‡πà‡∏á‡∏´‡πâ‡∏≠‡∏¢</div>
                <div onclick="selectAnswer(3, 'question2', event)">‡∏¢‡∏∏‡∏á</div>
            </div>
        </div>

        <!-- ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 3 -->
        <div class="question-container" id="question-container-next-2">
            <h2>‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏±‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏´‡∏•‡∏° ‡∏™‡∏π‡∏á ‡πÅ‡∏•‡∏∞‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏î‡∏±‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô ‡πÅ‡∏°‡πâ‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏î‡∏ô‡∏µ‡πâ
                ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î?</h2>
            <div class="answer-images">
                <div onclick="selectAnswer(1, 'question3', event)">‡∏ú‡∏∂‡πâ‡∏á</div>
                <div onclick="selectAnswer(2, 'question3', event)">‡∏à‡∏±‡πä‡∏Å‡∏à‡∏±‡πà‡∏ô</div>
                <div onclick="selectAnswer(3, 'question3', event)">‡∏ï‡∏±‡πä‡∏Å‡πÅ‡∏ï‡∏ô</div>
            </div>
        </div>

        <button onclick="checkAnswers()" id="check-answers-button" style="display:none">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>

        <div id="popup"></div>
    </div>

    <script>
        let answers = {
            question1: null,
            question2: null,
            question3: null
        };

        const correctAnswers = {
            question1: 2,
            question2: 1,
            question3: 2
        };

        function startGame() {
            document.querySelector('button').style.display = 'none';
            document.getElementById('question-container').style.display = 'block';
            document.getElementById("backgroundMusic").volume = 0.4;
            document.getElementById("backgroundMusic").play();
        }

        function selectAnswer(value, question, event) {
            answers[question] = value;

            // ‡∏•‡∏ö class ‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô
            const parent = event.currentTarget.parentElement;
            Array.from(parent.children).forEach(child => child.classList.remove('selected-answer'));

            // ‡πÉ‡∏™‡πà class ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            event.currentTarget.classList.add('selected-answer');

            const current = `question-container${question === 'question1' ? '' : question === 'question2' ? '-next' : '-next-2'}`;
            document.getElementById(current).style.display = 'none';

            if (question === 'question1') {
                document.getElementById('question-container-next').style.display = 'block';
            } else if (question === 'question2') {
                document.getElementById('question-container-next-2').style.display = 'block';
            }

            if (answers.question1 !== null && answers.question2 !== null && answers.question3 !== null) {
                document.getElementById('check-answers-button').style.display = 'block';
            }
        }


        function checkAnswers() {
            let correct = 0;
            if (answers.question1 === correctAnswers.question1) correct++;
            if (answers.question2 === correctAnswers.question2) correct++;
            if (answers.question3 === correctAnswers.question3) correct++;

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏° 20
            let score = Math.round((correct / 3) * 20);
            localStorage.setItem("mission5Score", score);
            localStorage.setItem("mission5Complete", "true");

            const popup = document.getElementById("popup");
            popup.style.display = "block";

            document.getElementById("successSound").play();
            popup.innerHTML = "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 5 üéâ";
            startFireworks();

            setTimeout(() => {
                window.location.href = "index.html#map";
            }, 4000);
        }



        function startFireworks() {
            const canvas = document.getElementById("fireworks");
            const ctx = canvas.getContext("2d");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];

            function createFirework() {
                const x = Math.random() * canvas.width;
                const y = Math.random() * canvas.height / 2;
                const color = `hsl(${Math.random() * 360}, 100%, 60%)`;

                for (let i = 0; i < 100; i++) {
                    particles.push({
                        x, y,
                        radius: Math.random() * 2 + 1,
                        dx: (Math.random() - 0.5) * 5,
                        dy: (Math.random() - 0.5) * 5,
                        alpha: 1,
                        color
                    });
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => {
                    p.x += p.dx;
                    p.y += p.dy;
                    p.alpha -= 0.01;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${hexToRgb(p.color)}, ${p.alpha})`;
                    ctx.fill();
                    if (p.alpha <= 0) particles.splice(i, 1);
                });
                if (particles.length > 0) requestAnimationFrame(animate);
            }

            function hexToRgb(h) {
                const temp = document.createElement("div");
                temp.style.color = h;
                document.body.appendChild(temp);
                const rgb = window.getComputedStyle(temp).color;
                document.body.removeChild(temp);
                return rgb.match(/\d+,\s*\d+,\s*\d+/)[0];
            }

            createFirework();
            createFirework();
            createFirework();
            animate();
        }
    </script>
</body>

</html>