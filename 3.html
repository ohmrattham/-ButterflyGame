<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-image: url('bgb.png');
    }

    .page {
      width: 100%;
      max-width: 600px;
      margin: auto;
      aspect-ratio: 1080 / 1920;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      display: none;
    }

    #startScreen {
      background-image: url('3.0.png');
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #startBtn {
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #8B4513;
      color: white;
      padding: 14px 28px;
    }

    #game,
    #game2 {
      height: 100vh;
      position: relative;
      justify-content: center;
      align-items: center;
    }

    #game {
      background-image: url('3.png');
    }

    #game2 {
      background-image: url('3.2.png');
      flex-direction: column;
      padding: 20px;
    }

    #overlayContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .drop-zone,
    .drag-option {
      position: absolute;
      width: 18%;
      height: 5%;
      border-radius: 10px;
      text-align: center;
      font-size: 2.2vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .drop-zone {
      border: 2px dashed #333;
      background-color: rgba(255, 255, 255, 0.7);
    }

    .drag-option {
      background-color: #ffcc66;
      cursor: grab;
    }

    #popup {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 5vw;
      border-radius: 20px;
      font-size: 4vw;
      font-weight: bold;
      display: none;
      z-index: 20;
      text-align: center;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    button {
      position: absolute;
      bottom: 5vh;
      padding: 1.5vh 3vh;
      font-size: 2.5vh;
      border: none;
      border-radius: 1.5vh;
      cursor: pointer;
      z-index: 10;
    }

    #checkBtn {
      left: 35%;
      background-color: #28a745;
      color: white;
    }

    #resetBtn {
      left: 70%;
      background-color: #dc3545;
      color: white;
    }

    #toGame2Btn {
      left: 50%;
      background-color: #007bff;
      color: white;
      transform: translateX(-50%);
      position: fixed;
      display: none;
    }

    select {
      font-size: 1em;
      padding: 6px;
      width: 30%;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    #game2Result {
      font-weight: bold;
      font-size: 1.3em;
      color: #333;
      position: absolute;
      top: 90%;
      left: 50%;
      transform: translateX(-50%);
    }

    #game2CheckBtn {
      left: 35%;
      background-color: #28a745;
      color: white;
      border-radius: 8px;
      box-shadow: 0 0.3vh 0.6vh rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    #game2CheckBtn:hover {
      background-color: #76a07f;
    }

    .game2-select {
      position: absolute;
      width: 35%;
      /* ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
      font-size: 1em;
    }

    .select1 {
      top: 50%;
      left: 10%;
    }

    .select2 {
      top: 50%;
      left: 50%;
    }

    .select3 {
      top: 75%;
      left: 10%;
    }

    .select4 {
      top: 75%;
      left: 50%;
    }
  </style>
</head>

<body>
  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° -->
  <div id="startScreen" class="page" style="display:flex;">
    <button id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
  </div>

  <!-- ‡πÄ‡∏Å‡∏° 1 -->
  <div id="game" class="page">
    <audio id="bgm" src="bgmusic.mp3" autoplay loop hidden></audio>
    <audio id="correctSound" src="correct.mp3"></audio>
    <audio id="wrongSound" src="wrong.mp3"></audio>
    <div id="overlayContainer"></div>
    <button id="checkBtn">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
    <button id="resetBtn">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
    <button id="toGame2Btn">‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà 2</button>
  </div>

  <!-- ‡πÄ‡∏Å‡∏° 2 -->
  <div id="game2" class="page">
    <select class="game2-select select1" onchange="checkGame2Answer(this, 1)">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏Ç‡πâ‡∏≠ 1 --</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏à‡∏£‡∏Å‡∏≤‡∏´‡∏ô‡∏≠‡∏ô‡∏¢‡∏µ‡πà‡πÇ‡∏ñ‡πà</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ü‡πâ‡∏≤">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ü‡πâ‡∏≤</option>
    </select>
    <select class="game2-select select2" onchange="checkGame2Answer(this, 2)">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏Ç‡πâ‡∏≠ 2 --</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ü‡πâ‡∏≤">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡∏°‡∏∞‡∏ô‡∏≤‡∏ß</option>
    </select>
    <select class="game2-select select3" onchange="checkGame2Answer(this, 3)">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏Ç‡πâ‡∏≠ 3 --</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏Å‡∏£‡∏Å</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ü‡πâ‡∏≤">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡∏Ñ‡∏π‡∏ì</option>
    </select>
    <select class="game2-select select4" onchange="checkGame2Answer(this, 4)">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏Ç‡πâ‡∏≠ 4 --</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏á‡∏ï‡∏¥‡πà‡∏á</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡πÉ‡∏ö‡∏£‡∏±‡∏Å</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏∞‡∏•‡∏≤‡∏™‡∏µ</option>
      <option value="‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ü‡πâ‡∏≤">‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏≠‡∏á</option>
    </select>
    <button id="game2CheckBtn" onclick="checkAllGame2Answers()">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
  </div>
  
   <div id="countdownTimer" style="
    position: fixed;
    top: 16px;
    right: 16px;
    background: rgba(0,0,0,0.75);
    color: #fff;
    font-size: 20px;
    padding: 10px 18px;
    border-radius: 14px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    z-index: 9999;
    box-shadow: 0 0 10px rgba(255,255,255,0.3);
    user-select: none;
  ">
    ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="timeRemaining">20:00</span>


  <!-- ‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° -->
  <div id="popup"></div>

  <script>
    // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 1
    const correctAnswers = {
      1: "‡∏´‡∏ô‡∏ß‡∏î", 2: "‡∏õ‡∏µ‡∏Å", 3: "‡∏´‡∏±‡∏ß", 4: "‡∏•‡∏≥‡∏ï‡∏±‡∏ß", 5: "‡∏ó‡πâ‡∏≠‡∏á"
    };
    // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 2
    const game2CorrectAnswers = {
      1: "‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏à‡∏£‡∏Å‡∏≤‡∏´‡∏ô‡∏≠‡∏ô‡∏¢‡∏µ‡πà‡πÇ‡∏ñ‡πà", 2: "‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡∏°‡∏∞‡∏ô‡∏≤‡∏ß", 3: "‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏´‡∏ô‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏Å‡∏£‡∏Å", 4: "‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ñ‡∏∏‡∏á‡∏ó‡∏≠‡∏á"
    };
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Drop Zone ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏≤‡∏Å
    const dropZonesData = [
      { top: 30, left: 15, answer: "1" },
      { top: 32, left: 55, answer: "2" },
      { top: 59, left: 9, answer: "3" },
      { top: 71.5, left: 17, answer: "4" },
      { top: 71.5, left: 56, answer: "5" },
    ];
    const dragOptionsData = [
      { top: 12, left: 40, index: "1", text: "‡∏•‡∏≥‡∏ï‡∏±‡∏ß" },
      { top: 12, left: 65, index: "2", text: "‡∏´‡∏ô‡∏ß‡∏î" },
      { top: 20, left: 15, index: "3", text: "‡∏´‡∏±‡∏ß" },
      { top: 20, left: 40, index: "4", text: "‡∏õ‡∏µ‡∏Å" },
      { top: 20, left: 65, index: "5", text: "‡∏ó‡πâ‡∏≠‡∏á" },
    ];

    let game2Answers = {};

    function createElements() {
      const container = document.getElementById("overlayContainer");
      container.innerHTML = "";
      dropZonesData.forEach(zone => {
        const div = document.createElement("div");
        div.className = "drop-zone";
        div.style.top = `${zone.top}%`;
        div.style.left = `${zone.left}%`;
        div.dataset.answer = zone.answer;
        container.appendChild(div);
      });
      dragOptionsData.forEach(opt => {
        const div = document.createElement("div");
        div.className = "drag-option";
        div.setAttribute("draggable", true);
        div.style.top = `${opt.top}%`;
        div.style.left = `${opt.left}%`;
        div.dataset.index = opt.index;
        div.innerText = opt.text;
        div.style.display = "flex";
        container.appendChild(div);
      });
    }

    function setupDragDrop() {
      document.querySelectorAll(".drag-option").forEach(opt => {
        opt.addEventListener("dragstart", e => {
          e.dataTransfer.setData("text/plain", opt.dataset.index);
        });
      });
      document.querySelectorAll(".drop-zone").forEach(zone => {
        zone.addEventListener("dragover", e => e.preventDefault());
        zone.addEventListener("drop", e => {
          e.preventDefault();
          const index = e.dataTransfer.getData("text/plain");
          const dropped = document.querySelector(`.drag-option[data-index='${index}']`);
          if (!zone.innerText) {
            zone.innerText = dropped.innerText;
            zone.dataset.index = index;
            dropped.style.display = "none";
          }
        });
      });
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
    document.getElementById("startBtn").onclick = () => {
      document.getElementById("startScreen").style.display = "none";
      document.getElementById("game").style.display = "flex";
      createElements();
      setupDragDrop();
      document.getElementById("bgm").play();
    };

    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏° 1
    document.getElementById("resetBtn").onclick = () => {
      document.querySelectorAll(".drop-zone").forEach(zone => {
        zone.innerText = "";
        delete zone.dataset.index;
      });
      document.querySelectorAll(".drag-option").forEach(opt => {
        opt.style.display = "flex";
      });
      document.getElementById("toGame2Btn").style.display = "none";
      localStorage.removeItem("score1");
      localStorage.removeItem("game1Done");
    };

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 1 (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û)
    document.getElementById("checkBtn").onclick = () => {
      let correct = 0;
      document.querySelectorAll(".drop-zone").forEach(zone => {
        const expected = correctAnswers[zone.dataset.answer];
        if (zone.innerText === expected) correct++;
      });
      const game1Score = (correct / 5) * 10;
      localStorage.setItem("score1", game1Score.toFixed(1));

      if (correct > 0) {
        localStorage.setItem("game1Done", "true");
        document.getElementById("toGame2Btn").style.display = "block";
        document.getElementById("correctSound").play();
      } else {
        document.getElementById("wrongSound").play();
      }
    };

    // ‡πÑ‡∏õ‡πÄ‡∏Å‡∏° 2
    document.getElementById("toGame2Btn").onclick = () => {
      document.getElementById("game").style.display = "none";
      document.getElementById("game2").style.display = "flex";
      document.getElementById("toGame2Btn").style.display = "none";
      document.getElementById("game2CheckBtn").style.display = "none";
      document.querySelectorAll("#game2 select").forEach(sel => sel.value = "");
      game2Answers = {};
    };

    // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 2 ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö
    function checkGame2Answer(selectElem, qNum) {
      game2Answers[qNum] = selectElem.value;
      if (Object.keys(game2Answers).length === 4 && Object.values(game2Answers).every(v => v !== "")) {
        document.getElementById("game2CheckBtn").style.display = "inline-block";
      } else {
        document.getElementById("game2CheckBtn").style.display = "none";
      }
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 2 ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ index.html
    function checkAllGame2Answers() {
      let correctCount = 0;
      for (let i = 1; i <= 4; i++) {
        if (game2Answers[i] === game2CorrectAnswers[i]) correctCount++;
      }
      const score2 = correctCount * 2.5; // ‡πÄ‡∏ï‡πá‡∏° 10
      localStorage.setItem("score2", score2.toFixed(1));

      const score1 = parseFloat(localStorage.getItem("score1")) || 0;
      const totalScore = (score1 + score2).toFixed(1);

      // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
      // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4
      const popup = document.getElementById("popup");
      popup.innerText = "üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4 ‡πÅ‡∏•‡πâ‡∏ß!";
      popup.style.display = "block";


      // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏£‡∏ß‡∏° (‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏° 20 ‡πÉ‡∏ä‡πâ correctSound)
      if (totalScore >= 20) {
        document.getElementById("correctSound").play();
      } else {
        document.getElementById("wrongSound").play();
      }

      // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
      localStorage.setItem("totalScore", totalScore);
      localStorage.setItem("mission3Score", totalScore);

      // ‡∏£‡∏≠ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ index.html
      setTimeout(() => {
        popup.style.display = "none";
        window.location.href = "index.html#map";
      }, 3000);

      // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏Å‡∏° 2 ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡πÄ‡∏™‡∏£‡πá‡∏à
      document.getElementById("game2CheckBtn").style.display = "none";
    }
   
      
      const MAX_PLAY_TIME = 20 * 60 * 1000; // 20 ‡∏ô‡∏≤‡∏ó‡∏µ (ms)
  let countdownInterval;

  function startCountdown() {
    const timerEl = document.getElementById("countdownTimer");
    const timeRemainingEl = document.getElementById("timeRemaining");

    let startTime = localStorage.getItem("gameStartTime");
    if (!startTime) {
      // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏° ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
      startTime = Date.now();
      localStorage.setItem("gameStartTime", startTime);
    }

    function updateTimer() {
      const elapsed = Date.now() - startTime;
      const remaining = MAX_PLAY_TIME - elapsed;

      if (remaining <= 0) {
        clearInterval(countdownInterval);
        timeRemainingEl.textContent = "00:00";
        alert("‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß!");
        window.location.href = "score.html"; // ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
        return;
      }

      const minutes = Math.floor(remaining / 60000);
      const seconds = Math.floor((remaining % 60000) / 1000);

      timeRemainingEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2,'0')}`;
    }

    updateTimer();
    countdownInterval = setInterval(updateTimer, 1000);
  }

  window.onload = () => {
    startCountdown();
  };
  </script>
</body>

</html>